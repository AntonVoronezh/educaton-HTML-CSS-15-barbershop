const getForm = document.querySelector('.form');
const getSubmitForm = document.querySelector('.btn--form');
const getBeardList = document.querySelector('.beard__list');
const getAllBeardItems = getBeardList.querySelectorAll('.radio');
const getDopList = document.querySelector('.dop');
const getAllDopItems = getDopList.querySelectorAll('.checkbox');


getSubmitForm.addEventListener('click', createOffer);

function createOffer(event) {
    event.preventDefault();

    const arrDop = [];
    [...getAllDopItems].filter(elem => elem.checked === true ? arrDop.push(elem.nextElementSibling.nextElementSibling.innerHTML) : null);
    const strDop = arrDop.join(', ');

    let BeardItem = '';
    [...getAllBeardItems].filter(elem => elem.checked === true ? BeardItem = elem.nextElementSibling.nextElementSibling.innerHTML : null);

    const text =
        `Ваше имя - <b>${getForm.name.value}</b>, <br>
    ваше отчество - <b>${getForm.surname.value}</b>,<br>
    ваша фамилия <b>"${getForm.family.value}"</b> <br>
    ваш телефон <b>"${getForm.phone.value}"</b> <br>
    ваш майл <b>"${getForm.mail.value}"</b> <br>
    <strong>будут сохранены и опубликованы</strong><br><br>
    ваша Информация для мастера <b>"${getForm.text.value}"</b> <br>
    <strong>будут передана мастеру</strong><br><br>
    модель бороды "${BeardItem}" <br>
    + <br>
    ${strDop} <br>
    `;
    // console.log(text);

    const successOverlay2 = createOverlay(text);
    document.body.appendChild(successOverlay2);

};
// // начало карты
ymaps.ready(function () {
    var myMap = new ymaps.Map('map', {
        center: [51.680427, 39.176769],
        zoom: 14
    }, {
            searchControlProvider: 'yandex#search'
        }),

        // Создаём макет содержимого.
        MyIconContentLayout = ymaps.templateLayoutFactory.createClass(
            '<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'
        ),
      
        myPlacemark = new ymaps.Placemark(myMap.getCenter(), {
            hintContent: 'Собственный значок метки',
            balloonContent: 'Это красивая метка'
        }, {
                // Опции.
                // Необходимо указать данный тип макета.
                iconLayout: 'default#image',
                // Своё изображение иконки метки.
                iconImageHref: './img/logo/logotype-map.svg',
                // Размеры метки.
                iconImageSize: [226, 30],
                // Смещение левого верхнего угла иконки относительно
                // её "ножки" (точки привязки).
                iconImageOffset: [-1, -1]
            });

       

    myMap.geoObjects
        .add(myPlacemark)
});
// конец карты

const getMobMenu = document.querySelector('.mob-menu');
const getOpenMobMenu = document.querySelector('.mobile-menu');
const getUserLink = document.querySelectorAll('.user__link');

getMobMenu.addEventListener('click', closeMobMenu);

function closeMobMenu() {
  getMobMenu.classList.add('mob-menu-hide')
};

getOpenMobMenu.addEventListener('click', openMobMenu);

function openMobMenu() {
  getMobMenu.classList.remove('mob-menu-hide')
};



var link = document.querySelectorAll(".user__link");

var popup = document.querySelector(".modal-login");
var close = popup.querySelector(".modal-close");

var form = popup.querySelector("form");
var login = popup.querySelector("[name=login]");
var password = popup.querySelector("[name=password]");

var storage = localStorage.getItem("login");

link[0].addEventListener("click", functionClick);
link[1].addEventListener("click", functionClick);

function functionClick (evt) {

  evt.preventDefault();
  popup.classList.add("modal-show");

  if (storage) {
    login.value = storage;
    password.focus();
  } else {
    login.focus();
  }
};

close.addEventListener("click", function (evt) {
  evt.preventDefault();
  popup.classList.remove("modal-show");
  popup.classList.remove("modal-error");
});

form.addEventListener("submit", function (evt) {
  evt.preventDefault();
  if (!login.value || !password.value) {
    evt.preventDefault();
    popup.classList.remove("modal-error");
    popup.offsetWidth = popup.offsetWidth;
    popup.classList.add("modal-error");
  } else {
    localStorage.setItem("login", login.value);
  }
  console.log(login.value, password.value);

  const successOverlay3 = createOverlay(`Вот тут ваши данные (${login.value}:${password.value}) будут куда-то отправлены`);
  document.body.appendChild(successOverlay3);
  
});

window.addEventListener("keydown", function (evt) {
  if (evt.keyCode === 27) {
    if (popup.classList.contains("modal-show")) {
      popup.classList.remove("modal-show");
      popup.classList.remove("modal-error");
    }
  }
});


const getNewsShowBtn = document.querySelector('.news-show');
const getHideNewsLists = document.querySelectorAll('.news__list--bottom');
// const getShowNewsLists = document.querySelectorAll('.news__list--show');

getNewsShowBtn.addEventListener('click', funcNewsShow);

function funcNewsShow() {
    getHideNewsLists.forEach(elem => {
        elem.classList.toggle('news__list--show')
    });
    getNewsShowBtn.innerHTML = 'спрятать';
    getNewsShowBtn.removeEventListener('click', funcNewsShow);
    getNewsShowBtn.addEventListener('click', funcNewsHide);
};

function funcNewsHide() {
   
    getHideNewsLists.forEach(elem => {
        elem.classList.toggle('news__list--show')
    });
    
    getNewsShowBtn.innerHTML = 'показать все';
    getNewsShowBtn.removeEventListener('click', funcNewsHide);
    getNewsShowBtn.addEventListener('click', funcNewsShow);
};

// начало кода модальное окно отзывов
let text = '<br><br><strong>СЕКРЕТЫ МЯГКОЙ И ПОСЛУШНОЙ БОРОДЫ</strong> \
<br><br>1. ГОРЯЧИЙ ДУШ. ПОВЫШЕННАЯ ВЛАЖНОСТЬ И ПАР, РАСПАРЯТ КОЛЮЧИЕ ВОЛОСКИ ВАШЕЙ БОРОДЫ. ПОСЛЕ ДУША, ВОСПОЛЬЗУЙТЕСЬ УВЛАЖНЯЮЩИМ МАСЛОМ (ЛЮБЫМ, КОТОРОЕ У ВАС ЕСТЬ ИЛИ СПЕЦИАЛЬНЫМ ДЛЯ БОРОДЫ), НАКРОЙТЕ ЛИЦО МАХРОВЫМ ПОЛОТЕНЦЕМ НА 10-15 МИНУТ И СДЕЛАЙТЕ ЛЕГКИЙ МАССАЖ.\
<br><br>2. НЕ МОЙТЕ БОРОДУ КАЖДЫЙ ДЕНЬ!!!ОТ ЕЖЕДНЕВНОГО МЫТЬЯ,ВОЛОСЫ НА БОРОДЕ СТАНОВЯТСЯ ЕЩЕ ЖЕСТЧЕ. МОЖНО МЫТЬ ЧЕРЕЗ ДЕНЬ,ЕСЛИ ЭТО КРАЙНЕ НЕОБХОДИМО, ТОГДА ПРИРОДНЫЕ МАСЛА,КОТОРЫЕ ДЕЛАЮТ ВОЛОСЫ ПОСЛУШНЫМИ УСПЕЮТ НАКОПИТЬСЯ.\
<br><br>3. КОНДИЦИОНЕР ДЛЯ ВОЛОС ИЛИ СПЕЦИАЛЬНЫЙ КОНДИЦИОНЕР ДЛЯ БОРОДЫ. ДАННОЕ СРЕДСТВО ПОМОЖЕТ УПРАВЛЯТЬ ВОЛОСАМИ И СДЕЛАТЬ ИХ МАКСИМАЛЬНО ПОДАТЛИВЫМИ.';

const getCommentsSelectors = document.querySelectorAll(".news__more-link");
const successOverlay = createOverlay(" <img src=\"./img/news/news1.jpg\">" + text);
// console.log(getCommentsSelectors.length);


for (let i = 0; i < getCommentsSelectors.length; i += 1) {
    getCommentsSelectors[i].addEventListener("click", function (event) {
        event.preventDefault();
        document.body.appendChild(successOverlay);
    });
}

function createOverlay(content) {
    const overlayElement = document.createElement("div");
    overlayElement.classList.add("overlay");
  
    const template = document.querySelector("#overlayTemplate");
    overlayElement.innerHTML = template.innerHTML;
  
    const closeElement = overlayElement.querySelector(".close");
    closeElement.addEventListener("click", function(event) {
        event.preventDefault();
      document.body.removeChild(overlayElement);
    });
  
    const contentElement = overlayElement.querySelector(".content");
    contentElement.innerHTML = content;
  
    return overlayElement;
  }


const getSliderBtnSubmit = document.querySelector('.slider--submit');
const getSliderSubmitForm = document.querySelector('.slider-form');
const getSliderSubmitBtn = document.querySelector('.slider-form__submit');
const getSliderP = document.querySelector('.slider-form__out');

getSliderBtnSubmit.addEventListener('click', createSubmitForm);

function createSubmitForm() {
    getSliderSubmitForm.style.height = '100%';
    getSliderSubmitForm.style.opacity = '1';
};

getSliderSubmitBtn.addEventListener('click', createNewComment);

function createNewComment(event) {
    event.preventDefault();
    const text =
        `Ваше фото <b>${getSliderSubmitForm.avatar.value}</b>, <br>
    ваше имя - <b>${getSliderSubmitForm.firstname.value}</b>, <br>
    ваша фамилия - <b>${getSliderSubmitForm.lastname.value}</b> <br>
    и ваш комментарий <b>"${getSliderSubmitForm.comment.value}"</b> <br><br>
    <span>будут сохранены и опубликованы</span>`
    // console.log(text);
    getSliderP.innerHTML = text;

};
const left = document.querySelector(".slider__left");
const right = document.querySelector(".slider__right");
const items = document.querySelector("#items");
const sliderDotsAll = document.querySelectorAll('.slider__dots-item');
const sliderDotsDiv = document.querySelector('.slider__dots');
const item = items.querySelectorAll(".elem");

const width = 100;
let count = 0;

right.addEventListener("click", function () {

    if (count <= item.length - 2) {
        count += 1;

        makePosition(count);

        sliderDotsAll.forEach(elem => elem.classList.remove('slider__dots-item--active'));
        sliderDotsAll[count].classList.add('slider__dots-item--active');
    }
});

left.addEventListener("click", function () {

     if (count !== 0) {
        count -= 1;

        makePosition(count);

        sliderDotsAll.forEach(elem => elem.classList.remove('slider__dots-item--active'));
        sliderDotsAll[count].classList.add('slider__dots-item--active');
    }
});

sliderDotsDiv.addEventListener('click', changeActiveDots);

function changeActiveDots(event) {

    sliderDotsAll.forEach(elem => elem.classList.remove('slider__dots-item--active'));
    


    event.target.classList.add('slider__dots-item--active');

    sliderDotsAll.forEach((elem, num) => {
        if(elem.classList.contains('slider__dots-item--active'))
        makePosition(num);
    } );

};

function makePosition(argCount) {
    position = width * argCount;
    return items.style.marginLeft = '-' + position + '%';
};

let player;

function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        // height: '360',
        // width: '640',
        videoId: '2e0nEgLAro4',
        playerVars: {
            enablejsapi: 1,
            controls: 0,
            disablekb: 0,
            showinfo: 0,
            rel: 0,
            autoplay: 0,
            modestbranding: 1
        },
        events: {
            // 'onReady': onPlayerReady,
            // 'onStateChange': onPlayerStateChange
        }
    });
}

const getVideo = document.querySelector(".player__video");
const getVideoPlayPauseButton = document.querySelector(".video__play-pause");
const getcVideoIcon = document.querySelector(".control__video-icon");
const getTimeRange = document.querySelector(".control__time-range");
const getAudioPlayPauseButton = document.querySelector(".control__sound-icon");
const getSoundRange = document.querySelector(".control__sound-range");


getVideoPlayPauseButton.addEventListener('click', playPause);
getcVideoIcon.addEventListener('click', playPause);
getVideo.addEventListener('timeupdate', percentRange);
getTimeRange.addEventListener('input', progressRange);

getAudioPlayPauseButton.addEventListener('click', playAudio);
getSoundRange.addEventListener('input', percentSound);
function getCurrentTime() {
    var currentTime = player.getCurrentTime();
    return roundNumber(currentTime, 3);
  }
console.log(player.getPlayerState());

function playPause() {

    if (player.getPlayerState() !== 1) {
        player.playVideo();
        getVideoPlayPauseButton.style.opacity = '0';
    } else {
        player.pauseVideo();
        getVideoPlayPauseButton.style.opacity = '0.5';
    }
};




//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiLCJtYXAuanMiLCJtb2ItbWVudS5qcyIsIm1vZGFsLmpzIiwibmV3cy5qcyIsInNsaWRlci1zdWJtaXQuanMiLCJzbGlkZXIuanMiLCJ2aWRlby5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2V0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbmNvbnN0IGdldFN1Ym1pdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLS1mb3JtJyk7XHJcbmNvbnN0IGdldEJlYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iZWFyZF9fbGlzdCcpO1xyXG5jb25zdCBnZXRBbGxCZWFyZEl0ZW1zID0gZ2V0QmVhcmRMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yYWRpbycpO1xyXG5jb25zdCBnZXREb3BMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRvcCcpO1xyXG5jb25zdCBnZXRBbGxEb3BJdGVtcyA9IGdldERvcExpc3QucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94Jyk7XHJcblxyXG5cclxuZ2V0U3VibWl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZU9mZmVyKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU9mZmVyKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGNvbnN0IGFyckRvcCA9IFtdO1xyXG4gICAgWy4uLmdldEFsbERvcEl0ZW1zXS5maWx0ZXIoZWxlbSA9PiBlbGVtLmNoZWNrZWQgPT09IHRydWUgPyBhcnJEb3AucHVzaChlbGVtLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcuaW5uZXJIVE1MKSA6IG51bGwpO1xyXG4gICAgY29uc3Qgc3RyRG9wID0gYXJyRG9wLmpvaW4oJywgJyk7XHJcblxyXG4gICAgbGV0IEJlYXJkSXRlbSA9ICcnO1xyXG4gICAgWy4uLmdldEFsbEJlYXJkSXRlbXNdLmZpbHRlcihlbGVtID0+IGVsZW0uY2hlY2tlZCA9PT0gdHJ1ZSA/IEJlYXJkSXRlbSA9IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZy5pbm5lckhUTUwgOiBudWxsKTtcclxuXHJcbiAgICBjb25zdCB0ZXh0ID1cclxuICAgICAgICBg0JLQsNGI0LUg0LjQvNGPIC0gPGI+JHtnZXRGb3JtLm5hbWUudmFsdWV9PC9iPiwgPGJyPlxyXG4gICAg0LLQsNGI0LUg0L7RgtGH0LXRgdGC0LLQviAtIDxiPiR7Z2V0Rm9ybS5zdXJuYW1lLnZhbHVlfTwvYj4sPGJyPlxyXG4gICAg0LLQsNGI0LAg0YTQsNC80LjQu9C40Y8gPGI+XCIke2dldEZvcm0uZmFtaWx5LnZhbHVlfVwiPC9iPiA8YnI+XHJcbiAgICDQstCw0Ygg0YLQtdC70LXRhNC+0L0gPGI+XCIke2dldEZvcm0ucGhvbmUudmFsdWV9XCI8L2I+IDxicj5cclxuICAgINCy0LDRiCDQvNCw0LnQuyA8Yj5cIiR7Z2V0Rm9ybS5tYWlsLnZhbHVlfVwiPC9iPiA8YnI+XHJcbiAgICA8c3Ryb25nPtCx0YPQtNGD0YIg0YHQvtGF0YDQsNC90LXQvdGLINC4INC+0L/Rg9Cx0LvQuNC60L7QstCw0L3Rizwvc3Ryb25nPjxicj48YnI+XHJcbiAgICDQstCw0YjQsCDQmNC90YTQvtGA0LzQsNGG0LjRjyDQtNC70Y8g0LzQsNGB0YLQtdGA0LAgPGI+XCIke2dldEZvcm0udGV4dC52YWx1ZX1cIjwvYj4gPGJyPlxyXG4gICAgPHN0cm9uZz7QsdGD0LTRg9GCINC/0LXRgNC10LTQsNC90LAg0LzQsNGB0YLQtdGA0YM8L3N0cm9uZz48YnI+PGJyPlxyXG4gICAg0LzQvtC00LXQu9GMINCx0L7RgNC+0LTRiyBcIiR7QmVhcmRJdGVtfVwiIDxicj5cclxuICAgICsgPGJyPlxyXG4gICAgJHtzdHJEb3B9IDxicj5cclxuICAgIGA7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0ZXh0KTtcclxuXHJcbiAgICBjb25zdCBzdWNjZXNzT3ZlcmxheTIgPSBjcmVhdGVPdmVybGF5KHRleHQpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdWNjZXNzT3ZlcmxheTIpO1xyXG5cclxufTsiLCIvLyAvLyDQvdCw0YfQsNC70L4g0LrQsNGA0YLRi1xyXG55bWFwcy5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKCdtYXAnLCB7XHJcbiAgICAgICAgY2VudGVyOiBbNTEuNjgwNDI3LCAzOS4xNzY3NjldLFxyXG4gICAgICAgIHpvb206IDE0XHJcbiAgICB9LCB7XHJcbiAgICAgICAgICAgIHNlYXJjaENvbnRyb2xQcm92aWRlcjogJ3lhbmRleCNzZWFyY2gnXHJcbiAgICAgICAgfSksXHJcblxyXG4gICAgICAgIC8vINCh0L7Qt9C00LDRkdC8INC80LDQutC10YIg0YHQvtC00LXRgNC20LjQvNC+0LPQvi5cclxuICAgICAgICBNeUljb25Db250ZW50TGF5b3V0ID0geW1hcHMudGVtcGxhdGVMYXlvdXRGYWN0b3J5LmNyZWF0ZUNsYXNzKFxyXG4gICAgICAgICAgICAnPGRpdiBzdHlsZT1cImNvbG9yOiAjRkZGRkZGOyBmb250LXdlaWdodDogYm9sZDtcIj4kW3Byb3BlcnRpZXMuaWNvbkNvbnRlbnRdPC9kaXY+J1xyXG4gICAgICAgICksXHJcbiAgICAgIFxyXG4gICAgICAgIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhteU1hcC5nZXRDZW50ZXIoKSwge1xyXG4gICAgICAgICAgICBoaW50Q29udGVudDogJ9Ch0L7QsdGB0YLQstC10L3QvdGL0Lkg0LfQvdCw0YfQvtC6INC80LXRgtC60LgnLFxyXG4gICAgICAgICAgICBiYWxsb29uQ29udGVudDogJ9Ct0YLQviDQutGA0LDRgdC40LLQsNGPINC80LXRgtC60LAnXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgLy8g0J7Qv9GG0LjQuC5cclxuICAgICAgICAgICAgICAgIC8vINCd0LXQvtCx0YXQvtC00LjQvNC+INGD0LrQsNC30LDRgtGMINC00LDQvdC90YvQuSDRgtC40L8g0LzQsNC60LXRgtCwLlxyXG4gICAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgICAgLy8g0KHQstC+0ZEg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQuNC60L7QvdC60Lgg0LzQtdGC0LrQuC5cclxuICAgICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICcuL2ltZy9sb2dvL2xvZ290eXBlLW1hcC5zdmcnLFxyXG4gICAgICAgICAgICAgICAgLy8g0KDQsNC30LzQtdGA0Ysg0LzQtdGC0LrQuC5cclxuICAgICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFsyMjYsIDMwXSxcclxuICAgICAgICAgICAgICAgIC8vINCh0LzQtdGJ0LXQvdC40LUg0LvQtdCy0L7Qs9C+INCy0LXRgNGF0L3QtdCz0L4g0YPQs9C70LAg0LjQutC+0L3QutC4INC+0YLQvdC+0YHQuNGC0LXQu9GM0L3QvlxyXG4gICAgICAgICAgICAgICAgLy8g0LXRkSBcItC90L7QttC60LhcIiAo0YLQvtGH0LrQuCDQv9GA0LjQstGP0LfQutC4KS5cclxuICAgICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0xLCAtMV1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgXHJcblxyXG4gICAgbXlNYXAuZ2VvT2JqZWN0c1xyXG4gICAgICAgIC5hZGQobXlQbGFjZW1hcmspXHJcbn0pO1xyXG4vLyDQutC+0L3QtdGGINC60LDRgNGC0YtcclxuIiwiY29uc3QgZ2V0TW9iTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2ItbWVudScpO1xuY29uc3QgZ2V0T3Blbk1vYk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9iaWxlLW1lbnUnKTtcbmNvbnN0IGdldFVzZXJMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVzZXJfX2xpbmsnKTtcblxuZ2V0TW9iTWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9iTWVudSk7XG5cbmZ1bmN0aW9uIGNsb3NlTW9iTWVudSgpIHtcbiAgZ2V0TW9iTWVudS5jbGFzc0xpc3QuYWRkKCdtb2ItbWVudS1oaWRlJylcbn07XG5cbmdldE9wZW5Nb2JNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1vYk1lbnUpO1xuXG5mdW5jdGlvbiBvcGVuTW9iTWVudSgpIHtcbiAgZ2V0TW9iTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdtb2ItbWVudS1oaWRlJylcbn07XG5cblxuIiwidmFyIGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnVzZXJfX2xpbmtcIik7XHJcblxyXG52YXIgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWxvZ2luXCIpO1xyXG52YXIgY2xvc2UgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNsb3NlXCIpO1xyXG5cclxudmFyIGZvcm0gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcclxudmFyIGxvZ2luID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIltuYW1lPWxvZ2luXVwiKTtcclxudmFyIHBhc3N3b3JkID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIltuYW1lPXBhc3N3b3JkXVwiKTtcclxuXHJcbnZhciBzdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsb2dpblwiKTtcclxuXHJcbmxpbmtbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uQ2xpY2spO1xyXG5saW5rWzFdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbkNsaWNrKTtcclxuXHJcbmZ1bmN0aW9uIGZ1bmN0aW9uQ2xpY2sgKGV2dCkge1xyXG5cclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWwtc2hvd1wiKTtcclxuXHJcbiAgaWYgKHN0b3JhZ2UpIHtcclxuICAgIGxvZ2luLnZhbHVlID0gc3RvcmFnZTtcclxuICAgIHBhc3N3b3JkLmZvY3VzKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxvZ2luLmZvY3VzKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtc2hvd1wiKTtcclxuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtZXJyb3JcIik7XHJcbn0pO1xyXG5cclxuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBpZiAoIWxvZ2luLnZhbHVlIHx8ICFwYXNzd29yZC52YWx1ZSkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtZXJyb3JcIik7XHJcbiAgICBwb3B1cC5vZmZzZXRXaWR0aCA9IHBvcHVwLm9mZnNldFdpZHRoO1xyXG4gICAgcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsLWVycm9yXCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImxvZ2luXCIsIGxvZ2luLnZhbHVlKTtcclxuICB9XHJcbiAgY29uc29sZS5sb2cobG9naW4udmFsdWUsIHBhc3N3b3JkLnZhbHVlKTtcclxuXHJcbiAgY29uc3Qgc3VjY2Vzc092ZXJsYXkzID0gY3JlYXRlT3ZlcmxheShg0JLQvtGCINGC0YPRgiDQstCw0YjQuCDQtNCw0L3QvdGL0LUgKCR7bG9naW4udmFsdWV9OiR7cGFzc3dvcmQudmFsdWV9KSDQsdGD0LTRg9GCINC60YPQtNCwLdGC0L4g0L7RgtC/0YDQsNCy0LvQtdC90YtgKTtcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN1Y2Nlc3NPdmVybGF5Myk7XHJcbiAgXHJcbn0pO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICBpZiAoZXZ0LmtleUNvZGUgPT09IDI3KSB7XHJcbiAgICBpZiAocG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWwtc2hvd1wiKSkge1xyXG4gICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtc2hvd1wiKTtcclxuICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLWVycm9yXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG4iLCJjb25zdCBnZXROZXdzU2hvd0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzLXNob3cnKTtcclxuY29uc3QgZ2V0SGlkZU5ld3NMaXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXdzX19saXN0LS1ib3R0b20nKTtcclxuLy8gY29uc3QgZ2V0U2hvd05ld3NMaXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXdzX19saXN0LS1zaG93Jyk7XHJcblxyXG5nZXROZXdzU2hvd0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmNOZXdzU2hvdyk7XHJcblxyXG5mdW5jdGlvbiBmdW5jTmV3c1Nob3coKSB7XHJcbiAgICBnZXRIaWRlTmV3c0xpc3RzLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QudG9nZ2xlKCduZXdzX19saXN0LS1zaG93JylcclxuICAgIH0pO1xyXG4gICAgZ2V0TmV3c1Nob3dCdG4uaW5uZXJIVE1MID0gJ9GB0L/RgNGP0YLQsNGC0YwnO1xyXG4gICAgZ2V0TmV3c1Nob3dCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jTmV3c1Nob3cpO1xyXG4gICAgZ2V0TmV3c1Nob3dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jTmV3c0hpZGUpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZnVuY05ld3NIaWRlKCkge1xyXG4gICBcclxuICAgIGdldEhpZGVOZXdzTGlzdHMuZm9yRWFjaChlbGVtID0+IHtcclxuICAgICAgICBlbGVtLmNsYXNzTGlzdC50b2dnbGUoJ25ld3NfX2xpc3QtLXNob3cnKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGdldE5ld3NTaG93QnRuLmlubmVySFRNTCA9ICfQv9C+0LrQsNC30LDRgtGMINCy0YHQtSc7XHJcbiAgICBnZXROZXdzU2hvd0J0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmNOZXdzSGlkZSk7XHJcbiAgICBnZXROZXdzU2hvd0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmNOZXdzU2hvdyk7XHJcbn07XHJcblxyXG4vLyDQvdCw0YfQsNC70L4g0LrQvtC00LAg0LzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+INC+0YLQt9GL0LLQvtCyXHJcbmxldCB0ZXh0ID0gJzxicj48YnI+PHN0cm9uZz7QodCV0JrQoNCV0KLQqyDQnNCv0JPQmtCe0Jkg0Jgg0J/QntCh0JvQo9Co0J3QntCZINCR0J7QoNCe0JTQqzwvc3Ryb25nPiBcXFxyXG48YnI+PGJyPjEuINCT0J7QoNCv0KfQmNCZINCU0KPQqC4g0J/QntCS0KvQqNCV0J3QndCQ0K8g0JLQm9CQ0JbQndCe0KHQotCsINCYINCf0JDQoCwg0KDQkNCh0J/QkNCg0K/QoiDQmtCe0JvQrtCn0JjQlSDQktCe0JvQntCh0JrQmCDQktCQ0KjQldCZINCR0J7QoNCe0JTQqy4g0J/QntCh0JvQlSDQlNCj0KjQkCwg0JLQntCh0J/QntCb0KzQl9Cj0JnQotCV0KHQrCDQo9CS0JvQkNCW0J3Qr9Cu0KnQmNCcINCc0JDQodCb0J7QnCAo0JvQrtCR0KvQnCwg0JrQntCi0J7QoNCe0JUg0KMg0JLQkNChINCV0KHQotCsINCY0JvQmCDQodCf0JXQptCY0JDQm9Cs0J3Qq9CcINCU0JvQryDQkdCe0KDQntCU0KspLCDQndCQ0JrQoNCe0JnQotCVINCb0JjQptCeINCc0JDQpdCg0J7QktCr0Jwg0J/QntCb0J7QotCV0J3QptCV0Jwg0J3QkCAxMC0xNSDQnNCY0J3Qo9CiINCYINCh0JTQldCb0JDQmdCi0JUg0JvQldCT0JrQmNCZINCc0JDQodCh0JDQli5cXFxyXG48YnI+PGJyPjIuINCd0JUg0JzQntCZ0KLQlSDQkdCe0KDQntCU0KMg0JrQkNCW0JTQq9CZINCU0JXQndCsISEh0J7QoiDQldCW0JXQlNCd0JXQktCd0J7Qk9CeINCc0KvQotCs0K8s0JLQntCb0J7QodCrINCd0JAg0JHQntCg0J7QlNCVINCh0KLQkNCd0J7QktCv0KLQodCvINCV0KnQlSDQltCV0KHQotCn0JUuINCc0J7QltCd0J4g0JzQq9Ci0Kwg0KfQldCg0JXQlyDQlNCV0J3QrCzQldCh0JvQmCDQrdCi0J4g0JrQoNCQ0JnQndCVINCd0JXQntCR0KXQntCU0JjQnNCeLCDQotCe0JPQlNCQINCf0KDQmNCg0J7QlNCd0KvQlSDQnNCQ0KHQm9CQLNCa0J7QotCe0KDQq9CVINCU0JXQm9CQ0K7QoiDQktCe0JvQntCh0Ksg0J/QntCh0JvQo9Co0J3Qq9Cc0Jgg0KPQodCf0JXQrtCiINCd0JDQmtCe0J/QmNCi0KzQodCvLlxcXHJcbjxicj48YnI+My4g0JrQntCd0JTQmNCm0JjQntCd0JXQoCDQlNCb0K8g0JLQntCb0J7QoSDQmNCb0Jgg0KHQn9CV0KbQmNCQ0JvQrNCd0KvQmSDQmtCe0J3QlNCY0KbQmNCe0J3QldCgINCU0JvQryDQkdCe0KDQntCU0KsuINCU0JDQndCd0J7QlSDQodCg0JXQlNCh0KLQktCeINCf0J7QnNCe0JbQldCiINCj0J/QoNCQ0JLQm9Cv0KLQrCDQktCe0JvQntCh0JDQnNCYINCYINCh0JTQldCb0JDQotCsINCY0KUg0JzQkNCa0KHQmNCc0JDQm9Cs0J3QniDQn9Ce0JTQkNCi0JvQmNCS0KvQnNCYLic7XHJcblxyXG5jb25zdCBnZXRDb21tZW50c1NlbGVjdG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmV3c19fbW9yZS1saW5rXCIpO1xyXG5jb25zdCBzdWNjZXNzT3ZlcmxheSA9IGNyZWF0ZU92ZXJsYXkoXCIgPGltZyBzcmM9XFxcIi4vaW1nL25ld3MvbmV3czEuanBnXFxcIj5cIiArIHRleHQpO1xyXG4vLyBjb25zb2xlLmxvZyhnZXRDb21tZW50c1NlbGVjdG9ycy5sZW5ndGgpO1xyXG5cclxuXHJcbmZvciAobGV0IGkgPSAwOyBpIDwgZ2V0Q29tbWVudHNTZWxlY3RvcnMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIGdldENvbW1lbnRzU2VsZWN0b3JzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3VjY2Vzc092ZXJsYXkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXkoY29udGVudCkge1xyXG4gICAgY29uc3Qgb3ZlcmxheUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXlcIik7XHJcbiAgXHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheVRlbXBsYXRlXCIpO1xyXG4gICAgb3ZlcmxheUVsZW1lbnQuaW5uZXJIVE1MID0gdGVtcGxhdGUuaW5uZXJIVE1MO1xyXG4gIFxyXG4gICAgY29uc3QgY2xvc2VFbGVtZW50ID0gb3ZlcmxheUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKTtcclxuICAgIGNsb3NlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXlFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgY29uc3QgY29udGVudEVsZW1lbnQgPSBvdmVybGF5RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIik7XHJcbiAgICBjb250ZW50RWxlbWVudC5pbm5lckhUTUwgPSBjb250ZW50O1xyXG4gIFxyXG4gICAgcmV0dXJuIG92ZXJsYXlFbGVtZW50O1xyXG4gIH1cclxuXHJcbiIsImNvbnN0IGdldFNsaWRlckJ0blN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItLXN1Ym1pdCcpO1xyXG5jb25zdCBnZXRTbGlkZXJTdWJtaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlci1mb3JtJyk7XHJcbmNvbnN0IGdldFNsaWRlclN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItZm9ybV9fc3VibWl0Jyk7XHJcbmNvbnN0IGdldFNsaWRlclAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWZvcm1fX291dCcpO1xyXG5cclxuZ2V0U2xpZGVyQnRuU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlU3VibWl0Rm9ybSk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTdWJtaXRGb3JtKCkge1xyXG4gICAgZ2V0U2xpZGVyU3VibWl0Rm9ybS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICBnZXRTbGlkZXJTdWJtaXRGb3JtLnN0eWxlLm9wYWNpdHkgPSAnMSc7XHJcbn07XHJcblxyXG5nZXRTbGlkZXJTdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjcmVhdGVOZXdDb21tZW50KTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld0NvbW1lbnQoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCB0ZXh0ID1cclxuICAgICAgICBg0JLQsNGI0LUg0YTQvtGC0L4gPGI+JHtnZXRTbGlkZXJTdWJtaXRGb3JtLmF2YXRhci52YWx1ZX08L2I+LCA8YnI+XHJcbiAgICDQstCw0YjQtSDQuNC80Y8gLSA8Yj4ke2dldFNsaWRlclN1Ym1pdEZvcm0uZmlyc3RuYW1lLnZhbHVlfTwvYj4sIDxicj5cclxuICAgINCy0LDRiNCwINGE0LDQvNC40LvQuNGPIC0gPGI+JHtnZXRTbGlkZXJTdWJtaXRGb3JtLmxhc3RuYW1lLnZhbHVlfTwvYj4gPGJyPlxyXG4gICAg0Lgg0LLQsNGIINC60L7QvNC80LXQvdGC0LDRgNC40LkgPGI+XCIke2dldFNsaWRlclN1Ym1pdEZvcm0uY29tbWVudC52YWx1ZX1cIjwvYj4gPGJyPjxicj5cclxuICAgIDxzcGFuPtCx0YPQtNGD0YIg0YHQvtGF0YDQsNC90LXQvdGLINC4INC+0L/Rg9Cx0LvQuNC60L7QstCw0L3Rizwvc3Bhbj5gXHJcbiAgICAvLyBjb25zb2xlLmxvZyh0ZXh0KTtcclxuICAgIGdldFNsaWRlclAuaW5uZXJIVE1MID0gdGV4dDtcclxuXHJcbn07IiwiY29uc3QgbGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19sZWZ0XCIpO1xyXG5jb25zdCByaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19yaWdodFwiKTtcclxuY29uc3QgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2l0ZW1zXCIpO1xyXG5jb25zdCBzbGlkZXJEb3RzQWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9fZG90cy1pdGVtJyk7XHJcbmNvbnN0IHNsaWRlckRvdHNEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19kb3RzJyk7XHJcbmNvbnN0IGl0ZW0gPSBpdGVtcy5xdWVyeVNlbGVjdG9yQWxsKFwiLmVsZW1cIik7XHJcblxyXG5jb25zdCB3aWR0aCA9IDEwMDtcclxubGV0IGNvdW50ID0gMDtcclxuXHJcbnJpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgaWYgKGNvdW50IDw9IGl0ZW0ubGVuZ3RoIC0gMikge1xyXG4gICAgICAgIGNvdW50ICs9IDE7XHJcblxyXG4gICAgICAgIG1ha2VQb3NpdGlvbihjb3VudCk7XHJcblxyXG4gICAgICAgIHNsaWRlckRvdHNBbGwuZm9yRWFjaChlbGVtID0+IGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19kb3RzLWl0ZW0tLWFjdGl2ZScpKTtcclxuICAgICAgICBzbGlkZXJEb3RzQWxsW2NvdW50XS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2RvdHMtaXRlbS0tYWN0aXZlJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxubGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICBpZiAoY291bnQgIT09IDApIHtcclxuICAgICAgICBjb3VudCAtPSAxO1xyXG5cclxuICAgICAgICBtYWtlUG9zaXRpb24oY291bnQpO1xyXG5cclxuICAgICAgICBzbGlkZXJEb3RzQWxsLmZvckVhY2goZWxlbSA9PiBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fZG90cy1pdGVtLS1hY3RpdmUnKSk7XHJcbiAgICAgICAgc2xpZGVyRG90c0FsbFtjb3VudF0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19kb3RzLWl0ZW0tLWFjdGl2ZScpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbnNsaWRlckRvdHNEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGFuZ2VBY3RpdmVEb3RzKTtcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZURvdHMoZXZlbnQpIHtcclxuXHJcbiAgICBzbGlkZXJEb3RzQWxsLmZvckVhY2goZWxlbSA9PiBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fZG90cy1pdGVtLS1hY3RpdmUnKSk7XHJcbiAgICBcclxuXHJcblxyXG4gICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fZG90cy1pdGVtLS1hY3RpdmUnKTtcclxuXHJcbiAgICBzbGlkZXJEb3RzQWxsLmZvckVhY2goKGVsZW0sIG51bSkgPT4ge1xyXG4gICAgICAgIGlmKGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXJfX2RvdHMtaXRlbS0tYWN0aXZlJykpXHJcbiAgICAgICAgbWFrZVBvc2l0aW9uKG51bSk7XHJcbiAgICB9ICk7XHJcblxyXG59O1xyXG5cclxuZnVuY3Rpb24gbWFrZVBvc2l0aW9uKGFyZ0NvdW50KSB7XHJcbiAgICBwb3NpdGlvbiA9IHdpZHRoICogYXJnQ291bnQ7XHJcbiAgICByZXR1cm4gaXRlbXMuc3R5bGUubWFyZ2luTGVmdCA9ICctJyArIHBvc2l0aW9uICsgJyUnO1xyXG59OyIsIlxyXG5sZXQgcGxheWVyO1xyXG5cclxuZnVuY3Rpb24gb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbiAgICBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCdwbGF5ZXInLCB7XHJcbiAgICAgICAgLy8gaGVpZ2h0OiAnMzYwJyxcclxuICAgICAgICAvLyB3aWR0aDogJzY0MCcsXHJcbiAgICAgICAgdmlkZW9JZDogJzJlMG5FZ0xBcm80JyxcclxuICAgICAgICBwbGF5ZXJWYXJzOiB7XHJcbiAgICAgICAgICAgIGVuYWJsZWpzYXBpOiAxLFxyXG4gICAgICAgICAgICBjb250cm9sczogMCxcclxuICAgICAgICAgICAgZGlzYWJsZWtiOiAwLFxyXG4gICAgICAgICAgICBzaG93aW5mbzogMCxcclxuICAgICAgICAgICAgcmVsOiAwLFxyXG4gICAgICAgICAgICBhdXRvcGxheTogMCxcclxuICAgICAgICAgICAgbW9kZXN0YnJhbmRpbmc6IDFcclxuICAgICAgICB9LFxyXG4gICAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICAgICAvLyAnb25SZWFkeSc6IG9uUGxheWVyUmVhZHksXHJcbiAgICAgICAgICAgIC8vICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5jb25zdCBnZXRWaWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxheWVyX192aWRlb1wiKTtcclxuY29uc3QgZ2V0VmlkZW9QbGF5UGF1c2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZpZGVvX19wbGF5LXBhdXNlXCIpO1xyXG5jb25zdCBnZXRjVmlkZW9JY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250cm9sX192aWRlby1pY29uXCIpO1xyXG5jb25zdCBnZXRUaW1lUmFuZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRyb2xfX3RpbWUtcmFuZ2VcIik7XHJcbmNvbnN0IGdldEF1ZGlvUGxheVBhdXNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250cm9sX19zb3VuZC1pY29uXCIpO1xyXG5jb25zdCBnZXRTb3VuZFJhbmdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250cm9sX19zb3VuZC1yYW5nZVwiKTtcclxuXHJcblxyXG5nZXRWaWRlb1BsYXlQYXVzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlQYXVzZSk7XHJcbmdldGNWaWRlb0ljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwbGF5UGF1c2UpO1xyXG5nZXRWaWRlby5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgcGVyY2VudFJhbmdlKTtcclxuZ2V0VGltZVJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgcHJvZ3Jlc3NSYW5nZSk7XHJcblxyXG5nZXRBdWRpb1BsYXlQYXVzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlBdWRpbyk7XHJcbmdldFNvdW5kUmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBwZXJjZW50U291bmQpO1xyXG5mdW5jdGlvbiBnZXRDdXJyZW50VGltZSgpIHtcclxuICAgIHZhciBjdXJyZW50VGltZSA9IHBsYXllci5nZXRDdXJyZW50VGltZSgpO1xyXG4gICAgcmV0dXJuIHJvdW5kTnVtYmVyKGN1cnJlbnRUaW1lLCAzKTtcclxuICB9XHJcbmNvbnNvbGUubG9nKHBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpKTtcclxuXHJcbmZ1bmN0aW9uIHBsYXlQYXVzZSgpIHtcclxuXHJcbiAgICBpZiAocGxheWVyLmdldFBsYXllclN0YXRlKCkgIT09IDEpIHtcclxuICAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICAgICAgZ2V0VmlkZW9QbGF5UGF1c2VCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgICAgICBnZXRWaWRlb1BsYXlQYXVzZUJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuXHJcbiJdfQ==
